DROP TABLE IF EXISTS shop_product;

CREATE TABLE shop_product
(
	shop_product_id INTEGER GENERATED ALWAYS AS IDENTITY,
  shop_id INTEGER NOT NULL,
  product_id INTEGER NOT NULL,
  units_in_stock INTEGER NOT NULL DEFAULT 0,
  
	CONSTRAINT pk_shop_product_shop_product_id PRIMARY KEY (shop_product_id),
  CONSTRAINT unq_shop_product_shop_id_product_id UNIQUE (shop_id, product_id),
  CONSTRAINT chk_shop_product_units_in_stock CHECK (units_in_stock >= 0),
  CONSTRAINT fk_shop_product_product_id_product_product_id FOREIGN KEY (product_id) REFERENCES product(product_id),
  CONSTRAINT fk_shop_product_shop_id_shop_shop_id FOREIGN KEY (shop_id) REFERENCES shop(shop_id)
);

INSERT INTO shop_product(shop_id, product_id, units_in_stock)
     VALUES (1, 1, 157), -- 1
            (1, 2, 214), -- 2
            (1, 3, 171), -- 3
            (1, 4, 154), -- 4
            (1, 5, 187), -- 5
            (1, 6, 167), -- 6
            (1, 7, 198), -- 7
            (1, 8, 162), -- 8
            (1, 9, 214), -- 9
            (1, 10, 194), -- 10
            (1, 11, 241), -- 11
            (1, 12, 165), -- 12
            (1, 13, 174), -- 13
            (1, 14, 158), -- 14
            (1, 15, 198), -- 15
            (1, 16, 162), -- 16
            (1, 17, 140), -- 17
            (1, 18, 174), -- 18
            (1, 19, 185), -- 19
            (1, 20, 174), -- 20
            (1, 21, 213), -- 21
            (1, 22, 165), -- 22
            (1, 23, 184), -- 23
            (1, 24, 124), -- 24
            (1, 25, 184), -- 25
            (1, 26, 175), -- 26
            (1, 27, 124), -- 27
            (1, 28, 167), -- 28
            (1, 29, 187), -- 29
            (1, 30, 189), -- 30
            (1, 31, 164), -- 31
            (1, 32, 158), -- 32
            (1, 33, 241), -- 33
            (1, 34, 275), -- 34
            (1, 35, 168), -- 35
            (1, 36, 124), -- 36
            (1, 37, 184), -- 37
            (1, 38, 214), -- 38
            (1, 39, 157), -- 39
            (1, 40, 192), -- 40
            (1, 41, 162), -- 41
            (1, 42, 184), -- 42
            (1, 43, 158), -- 43
            (1, 44, 197), -- 44
            (1, 45, 167), -- 45
            (1, 46, 148), -- 46
            (1, 47, 162), -- 47
            (1, 48, 187), -- 48
            (1, 49, 199), -- 49
            (1, 50, 196), -- 50
            (1, 51, 162), -- 51
            (1, 52, 183), -- 52
            (1, 53, 176), -- 53
            (1, 54, 199), -- 54
            (1, 55, 174), -- 55
            (1, 56, 134), -- 56
            (1, 57, 196), -- 57
            (1, 58, 243), -- 58
            (1, 59, 244), -- 59
            (1, 60, 256), -- 60
            (1, 61, 218), -- 61
            (1, 62, 216), -- 62
            (1, 63, 213), -- 63
            (1, 64, 255), -- 64
            (1, 65, 248), -- 65
            (1, 66, 246), -- 66
            (1, 67, 257), -- 67
            (1, 68, 259), -- 68
            (1, 69, 263), -- 69
            (1, 70, 143), -- 70
            (1, 71, 257), -- 71
            (1, 72, 155), -- 72
            (1, 73, 148), -- 73
            (1, 74, 163), -- 74
            (1, 75, 311), -- 75
            (1, 76, 145), -- 76
            (1, 77, 167), -- 77
            (1, 78, 143), -- 78
            (1, 79, 150), -- 79
            (1, 80, 168), -- 80
            (1, 81, 158), -- 81
            (1, 82, 163), -- 82
            (1, 83, 180), -- 83
            (1, 84, 197), -- 84
            (1, 85, 143), -- 85
            (1, 86, 182), -- 86
            (1, 87, 150), -- 87
            (1, 88, 176), -- 88
            (1, 89, 184), -- 89
            (1, 90, 130), -- 90
            (1, 91, 213), -- 91
            (1, 92, 218), -- 92
            (1, 93, 164), -- 93
            (1, 94, 284), -- 94
            (1, 95, 265), -- 95
            (1, 96, 213), -- 96
            (1, 97, 257), -- 97
            (1, 98, 315), -- 98

            (1, 99, 25), -- 99
            (1, 100, 59), -- 100
            (1, 101, 67), -- 101
            (1, 102, 29), -- 102
            (1, 103, 34), -- 103

            (1, 104, 56), -- 104
            (1, 105, 48), -- 105
            (1, 106, 39), -- 106
            (1, 107, 67), -- 107
            (1, 108, 14), -- 108
            (1, 109, 89), -- 109
            (1, 110, 62), -- 110
            (1, 111, 58), -- 111
            (1, 112, 39), -- 112
            (1, 113, 46), -- 113
            (1, 114, 50), -- 114
            (1, 115, 29), -- 115
            (1, 116, 37), -- 116
            (1, 117, 48), -- 117
            (1, 118, 62), -- 118
            (1, 119, 79), -- 119
            (1, 120, 82), -- 120
            (1, 121, 37), -- 121

            (1, 122, 53), -- 122
            (1, 123, 28), -- 123
            (1, 124, 37), -- 124
            (1, 125, 39), -- 125
            (1, 126, 61), -- 126
            (1, 127, 68), -- 127
            (1, 128, 34), -- 128

            (1, 129, 57), -- 129
            (1, 130, 68), -- 130
            (1, 131, 43), -- 131
            (1, 132, 39), -- 132
            (1, 133, 42), -- 133
            (1, 134, 48), -- 134
            (1, 135, 62), -- 135

            (1, 136, 29), -- 136
            (1, 137, 26), -- 137
            (1, 138, 37), -- 138
            (1, 139, 64), -- 139
            (1, 140, 79), -- 140
            (1, 141, 86), -- 141
            (1, 142, 81), -- 142
            (1, 143, 59), -- 143
            (1, 144, 60), -- 144
            (1, 145, 48), -- 145
            (1, 146, 62), -- 146
            (1, 147, 38), -- 147
            (1, 148, 57), -- 148
            (1, 149, 64), -- 149
            (1, 150, 12), -- 150
            (1, 151, 84), -- 151
            (1, 152, 52), -- 152
            (1, 153, 81), -- 153
            (1, 154, 16), -- 154
            (1, 155, 52), -- 155
            (1, 156, 59), -- 156
            (1, 157, 67), -- 157
            (1, 158, 84), -- 158
            (1, 159, 69), -- 159
            (1, 160, 43), -- 160
            (1, 161, 56), -- 161
            (1, 162, 5), -- 162
            (1, 163, 19), -- 163
            (1, 164, 63), -- 164
            (1, 165, 67), -- 165
            (1, 166, 59), -- 166
            (1, 167, 43), -- 167
            (1, 168, 59), -- 168
            (1, 169, 57), -- 169
            (1, 170, 68), -- 170
            (1, 171, 49), -- 171
            (1, 172, 68), -- 172
            (1, 173, 59), -- 173
            (1, 174, 43), -- 174
            (1, 175, 57), -- 175
            
            (1, 176, 18), -- 176
            (1, 177, 59); -- 177

INSERT INTO shop_product(shop_id, product_id, units_in_stock)
     VALUES (2, 1, 59), -- 1
            (2, 2, 67), -- 2
            (2, 3, 53), -- 3
            (2, 4, 84), -- 4
            (2, 5, 71), -- 5
            (2, 6, 68), -- 6
            (2, 7, 84), -- 7
            (2, 8, 67), -- 8
            (2, 9, 89), -- 9
            (2, 10, 75), -- 10
            (2, 11, 61), -- 11
            (2, 12, 87), -- 12
            (2, 13, 64), -- 13
            (2, 14, 95), -- 14
            (2, 15, 67), -- 15
            (2, 16, 58), -- 16
            (2, 17, 57), -- 17
            (2, 18, 56), -- 18
            (2, 19, 54), -- 19
            (2, 20, 58), -- 20
            (2, 21, 55), -- 21
            (2, 22, 52), -- 22
            (2, 23, 91), -- 23
            (2, 24, 83), -- 24
            (2, 25, 76), -- 25
            (2, 26, 56), -- 26
            (2, 27, 76), -- 27
            (2, 28, 75), -- 28
            (2, 29, 62), -- 29
            (2, 30, 54), -- 30
            (2, 31, 98), -- 31
            (2, 32, 68), -- 32
            (2, 33, 59), -- 33
            (2, 34, 67), -- 34
            (2, 35, 77), -- 35
            (2, 36, 66), -- 36
            (2, 37, 69), -- 37
            (2, 38, 55), -- 38
            (2, 39, 56), -- 39
            (2, 40, 51), -- 40
            (2, 41, 50), -- 41
            (2, 42, 80), -- 42
            (2, 43, 86), -- 43
            (2, 44, 57), -- 44
            (2, 45, 64), -- 45
            (2, 46, 74), -- 46
            (2, 47, 76), -- 47
            (2, 48, 63), -- 48
            (2, 49, 59), -- 49
            (2, 50, 67), -- 50
            (2, 51, 68), -- 51
            (2, 52, 59), -- 52
            (2, 53, 57), -- 53
            (2, 54, 64), -- 54
            (2, 55, 68), -- 55
            (2, 56, 94), -- 56
            (2, 57, 87), -- 57
            (2, 58, 86), -- 58
            (2, 59, 82), -- 59
            (2, 60, 76), -- 60
            (2, 61, 72), -- 61
            (2, 62, 75), -- 62
            (2, 63, 74), -- 63
            (2, 64, 81), -- 64
            (2, 65, 86), -- 65
            (2, 66, 89), -- 66
            (2, 67, 84), -- 67
            (2, 68, 61), -- 68
            (2, 69, 67), -- 69
            (2, 70, 92), -- 70
            (2, 71, 94), -- 71
            (2, 72, 73), -- 72
            (2, 73, 96), -- 73
            (2, 74, 42), -- 74
            (2, 75, 84), -- 75
            (2, 76, 69), -- 76
            (2, 77, 88), -- 77
            (2, 78, 94), -- 78
            (2, 79, 97), -- 79
            (2, 80, 61), -- 80
            (2, 81, 68), -- 81
            (2, 82, 84), -- 82
            (2, 83, 76), -- 83
            (2, 84, 89), -- 84
            (2, 85, 94), -- 85
            (2, 86, 86), -- 86
            (2, 87, 76), -- 87
            (2, 88, 65), -- 88
            (2, 89, 69), -- 89
            (2, 90, 74), -- 90
            (2, 91, 86), -- 91
            (2, 92, 81), -- 92
            (2, 93, 89), -- 93
            (2, 94, 63), -- 94
            (2, 95, 72), -- 95
            (2, 96, 74), -- 96
            (2, 97, 76), -- 97
            (2, 98, 45), -- 98

            (2, 99, 43), -- 99
            (2, 100, 17), -- 100
            (2, 101, 29), -- 101
            (2, 102, 34), -- 102
            (2, 103, 35), -- 103

            (2, 104, 27), -- 104
            (2, 105, 26), -- 105
            (2, 106, 25), -- 106
            (2, 107, 34), -- 107
            (2, 108, 38), -- 108
            (2, 109, 39), -- 109
            (2, 110, 44), -- 110
            (2, 111, 42), -- 111
            (2, 112, 18), -- 112
            (2, 113, 19), -- 113
            (2, 114, 34), -- 114
            (2, 115, 38), -- 115
            (2, 116, 19), -- 116
            (2, 117, 25), -- 117
            (2, 118, 29), -- 118
            (2, 119, 38), -- 119
            (2, 120, 37), -- 120
            (2, 121, 35), -- 121

            (2, 122, 43), -- 122
            (2, 123, 42), -- 123
            (2, 124, 47), -- 124
            (2, 125, 35), -- 125
            (2, 126, 39), -- 126
            (2, 127, 18), -- 127
            (2, 128, 16), -- 128

            (2, 129, 17), -- 129
            (2, 130, 16), -- 130
            (2, 131, 24), -- 131
            (2, 132, 29), -- 132
            (2, 133, 42), -- 133
            (2, 134, 44), -- 134
            (2, 135, 47), -- 135

            (2, 136, 16), -- 136
            (2, 137, 24), -- 137
            (2, 138, 28), -- 138
            (2, 139, 43), -- 139
            (2, 140, 40), -- 140
            (2, 141, 16), -- 141
            (2, 142, 18), -- 142
            (2, 143, 19), -- 143
            (2, 144, 34), -- 144
            (2, 145, 38), -- 145
            (2, 146, 36), -- 146
            (2, 147, 42), -- 147
            (2, 148, 26), -- 148
            (2, 149, 27), -- 149
            (2, 150, 25), -- 150
            (2, 151, 20), -- 151
            (2, 152, 19), -- 152
            (2, 153, 17), -- 153
            (2, 154, 16), -- 154
            (2, 155, 25), -- 155
            (2, 156, 49), -- 156
            (2, 157, 47), -- 157
            (2, 158, 40), -- 158
            (2, 159, 43), -- 159
            (2, 160, 46), -- 160
            (2, 161, 35), -- 161
            (2, 162, 38), -- 162
            (2, 163, 34), -- 163
            (2, 164, 31), -- 164
            (2, 165, 38), -- 165
            (2, 166, 39), -- 166
            (2, 167, 36), -- 167
            (2, 168, 33), -- 168
            (2, 169, 26), -- 169
            (2, 170, 24), -- 170
            (2, 171, 28), -- 171
            (2, 172, 25), -- 172
            (2, 173, 27), -- 173
            (2, 174, 35), -- 174
            (2, 175, 31), -- 175
            
            (2, 176, 18), -- 176
            (2, 177, 15); -- 177

SELECT *
  FROM shop_product;